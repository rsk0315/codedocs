% いもす法

配列 $a[0\ldots n-1]$ があり，まず $1 \le j \le m$ に対して以下の処理を行う．
$$ a_i \gets a_i + x_j\text{ for }l_j\le i<r_j. $$
ただし $0\le l_j<r_j<n$ とする．この処理の後，$1 \le j \le m'$ に対して以下の値を求める．
$$ \sum_{i=l_j'}^{r_j'-1} a_i. $$
これは，愚直に行うと最悪 $O(n(m+m'))$ 時間かかる．

まず，前半の処理において，$a_i-a_{i-1}$ の値が変わるのは $i \in \{l_j, r_j\}$ のみであることに注目する．そこで，一旦 $a'[0\ldots n]$ を考え，$a_i' = a_{i+1}-a_i$ とする．

$a_i$ の $[l_j, r_j)$ の各要素に対して処理する代わりに以下の処理を行う．
- $a_{l_j}' \gets a_{l_j}' + x$
- $a_{r_j}' \gets a_{r_j}' - x$

得られた $a'$ は累積和の項目の $a$ と見ることができるため，累積和の手法を用いて $a$ の区間 $[l_j', r_j')$ での総和を $O(1)$ 時間で求めることができる．

全体の計算時間は $O(n+m+m')$ である．

名称は [@imos](https://twitter.com/imos) に由来する．